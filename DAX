# Financial & Customer Analytics Dashboard - DAX Measures

## Calculated Columns

| Column | Formula | Purpose |
|--------|---------|---------|
| Revenue | `=[Quantity] * [Unit Price]` | Compute gross sales per order |
| Net Revenue | `=[Revenue] - [Refund Amount]` | Adjust revenue for returns |
| Profit | `=[Net Revenue] - [Cost]` | Compute profit per order |
| Year | `=YEAR([Order Date])` | Extract year for time analysis |
| Month | `=MONTH([Order Date])` | Extract month for time analysis |
| Month-Year | `=FORMAT([Order Date], "MMM-YYYY")` | Time hierarchy for reporting |
| Customer Active Flag | `=IF([Last Purchase Date] >= TODAY()-30, 1, 0)` | Flag active customers for churn analysis |

---

## Financial KPI Measures

| KPI | Formula | Purpose |
|-----|---------|---------|
| Total Revenue | `=SUM(fact_sales[Revenue])` | Overall revenue |
| Net Revenue | `=SUM(fact_sales[Net Revenue])` | Revenue after refunds |
| Total Cost | `=SUM(fact_sales[Cost])` | Total costs incurred |
| Gross Profit | `=SUMX(fact_sales, fact_sales[Revenue] - fact_sales[Cost])` | Revenue minus cost |
| Contribution Margin % | `=DIVIDE([Gross Profit], [Total Revenue])` | Profit margin percentage |
| Average Order Value | `=DIVIDE([Total Revenue], [Total Orders])` | Avg revenue per order |
| Total Orders | `=COUNT(fact_sales[Order_Item_ID])` | Count of transactions |
| YoY Revenue Growth % | `=DIVIDE([Total Revenue]-CALCULATE([Total Revenue], SAMEPERIODLASTYEAR(dim_date[Order_Date])), CALCULATE([Total Revenue], SAMEPERIODLASTYEAR(dim_date[Order_Date])))` | Year-over-year revenue growth |
| Refund Revenue | `=CALCULATE([Total Revenue], fact_sales[Status]="Returned")` | Revenue lost to refunds |
| Net Revenue (after Refunds) | `=[Total Revenue] - [Refund Revenue]` | Revenue adjusted for refunds |

---

## Customer KPI Measures

| KPI | Formula | Purpose |
|-----|---------|---------|
| Total Customers | `=DISTINCTCOUNT(dim_customer[User_ID])` | Unique customer count |
| Active Customers | `=CALCULATE([Total Customers], dim_customer[Customer Active Flag]=1)` | Count of active customers |
| Churned Customers | `=CALCULATE([Total Customers], dim_customer[Customer Active Flag]=0)` | Customers inactive this period |
| Churn Rate % | `=DIVIDE([Churned Customers], CALCULATE([Total Customers], DATEADD(dim_date[Order_Date], -1, MONTH)))` | Customer retention metric |
| Revenue Lost to Churn | `=CALCULATE([Revenue], dim_customer[Customer Active Flag]=0)` | Revenue impacted by churn |
| Revenue by Segment | `=CALCULATE([Total Revenue], customer_segments[Segment]="Champions")` | Revenue per RFM segment (repeat for all segments) |
| Revenue by Acquisition Channel | `=CALCULATE([Total Revenue], dim_customer[Acquisition Channel]="Search")` | Revenue by marketing channel |
| Revenue by Gender | `=CALCULATE([Total Revenue], dim_customer[Gender]="Female")` | Gender-based revenue split |

---

## Time Intelligence Functions

| Function | Example | Purpose |
|----------|---------|---------|
| SAMEPERIODLASTYEAR() | `CALCULATE([Total Revenue], SAMEPERIODLASTYEAR(dim_date[Order_Date]))` | Compare revenue YoY |
| DATEADD() | `CALCULATE([Total Revenue], DATEADD(dim_date[Order_Date], -1, MONTH))` | Compare revenue MoM |
| TOTALYTD() | `TOTALYTD([Total Revenue], dim_date[Order_Date])` | Year-to-date calculation |
